# **Тестовое задание разработка микросервиса**

## **Описание задания:**

Реализовать микросервис, который будет предоставлять http api, для показа разницы курса той или иной валюты за выбранные даты.

  1. Курс валют брать с [сайта cbr](http://www.cbr.ru/development/sxml/).
  2. Микросервис должен содержать два метода:
  - Получение списка валют, который должен возвращать все валюты, которые можно использовать. Список можно взять [здесь](http://www.cbr.ru/scripts/XML_valFull.asp).
  - Получение разницы курса между двумя датами за выбранную дату, метод должен принимать символьный код валюты, и две даты. Возвращать метод должен курс за первую дату, курс за вторую дату и разницу между ними.
  3. Даты должны передаваться в следующем формате: YYYY-MM-DD.

## **Шаги выполнения задания:**

### **1. Написание микросервиса**

Для реализации микросервиса с предоставлением http api использовался веб-фреймворк FastAPI с Python 3.6+. 

Код для работы с сервисом прописан в файле [main](https://github.com/ElenaBalbukova/test_task/blob/main/main.py). Сервис возвращает главную страницу, разницу курса за выбранные даты и полный список валют со всеми данными.

### **Получение данных**
 
Для реализации первого метода возвращения полного списка валют с [сайта](http://www.cbr.ru/scripts/XML_valFull.asp) написан код, который находится в файле [add_currency_list](https://github.com/ElenaBalbukova/test_task/blob/main/add_currency_list.py). Данный код сохраняет список валют из формата XML в формат json в файл [data_file](https://github.com/ElenaBalbukova/test_task/blob/main/data_file.json).

Для реализации второго метода получения курса валют код написан в файле [get_difference_in_course.py](https://github.com/ElenaBalbukova/test_task/blob/main/get_difference_in_course.py). На вход сервер принимает две даты и символ валюты, по символу валюты определеяем ID валюты, собираем ссылку с датами и ID, обращаемся к [сайту](http://www.cbr.ru/scripts/XML_dynamic.asp?date_req1=02/03/2001&date_req2=14/03/2001&VAL_NM_RQ=R01235), возвращаем курс за первую и вторую даты и разницу курса.

## **Запуск**

Для установки FastAPI выполните команду:

```python
pip install -r requirements.txt
```

Для запуска сервера выполните команду:
```python
uvicorn main:app
```
# **Тесткейсы:**

Получение списка валют:
```
http://127.0.0.1:8000/docs#/default/get_currency_list_get_currency_list_get
```
Получение разницы курса:
```
http://127.0.0.1:8000/docs#/default/get_two_date_date_get
```
Возвращает курс за первую дату, курс за вторую дату и разницу между ними. Дата передается в формате: YYYY-MM-DD
```
{
  "2001-03-02": "28,6200",
  "2001-03-14": "28,6500",
  "difference_value": 0.03
}
```